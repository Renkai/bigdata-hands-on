# 如何处理脏数据:以Scala+play-json为例

数据采集是数据处理的第一站,由于采集过程中数据来源复杂,需要经常处理有脏数据的情况.我们在采集中将各种意外情况妥善处理后,才能为后续的用户用更简单可靠的方式处理数据提供可能性(让只会SQL的人也能处理数据).

## 整体原则

* 任务不崩溃
  * 任务崩溃之后需要人为恢复并牺牲后续依赖它的系统运行的时间,**造成经济损失**
  * 除了硬件和系统故障之外,我们有充分的手段不让任务因内容异常而崩溃
* 异常有统一记录点
  * 异常记录分散的情况消耗排查者过多时间(牺牲后续依赖它的系统运行的时间,**造成经济损失**),并增加新人学习成本
* 异常记录足够详细
  * 异常记录过于宽泛会消耗排查者过多时间,甚至要变更代码重新发布来排查异常(牺牲后续依赖它的系统运行的时间,**造成经济损失**)

## 不良示范

### 藏匿异常(最糟糕的动作)

### 合并异常

### 不捕获异常

### 异常范围过宽



## 利用类型系统排错和提升效率

### 代数数据类型 Algebraic Data Type

### 利用ADT 确认逻辑完整性

### 利用类型系统消除空指针异常

### 利用类型系统合理设计逻辑精细度

### 利用类型系统确保错误处理

### 利用类型系统做短路逻辑

